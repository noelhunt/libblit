/*
	test for getrect, ngetrect, texture, mouse input, rectf
*/
#include "blit.h"
uchar Darkgrey[] ={
	0xDD, 0xDD, 0x77, 0x77, 0xDD, 0xDD, 0x77, 0x77,
	0xDD, 0xDD, 0x77, 0x77, 0xDD, 0xDD, 0x77, 0x77,
	0xDD, 0xDD, 0x77, 0x77, 0xDD, 0xDD, 0x77, 0x77,
	0xDD, 0xDD, 0x77, 0x77, 0xDD, 0xDD, 0x77, 0x77,
};

uchar Lightgrey[] ={
	0x11, 0x11, 0x44, 0x44, 0x11, 0x11, 0x44, 0x44,
	0x11, 0x11, 0x44, 0x44, 0x11, 0x11, 0x44, 0x44,
	0x11, 0x11, 0x44, 0x44, 0x11, 0x11, 0x44, 0x44,
	0x11, 0x11, 0x44, 0x44, 0x11, 0x11, 0x44, 0x44,
};

void main (int argc, char **argv){
	Bitmap *lightgrey, *darkgrey;
	Rectangle r;

	request(MOUSE);
	initdisplay(argc, argv);

	darkgrey =balloc(Rect(0,0,16,16), 0);
	wrbitmap(darkgrey, 0, 16, Darkgrey);
	lightgrey = balloc(Rect(0,0,16,16), 0);
	wrbitmap(lightgrey, 0, 16, Lightgrey);

	/* ngetrect allows optional blocking so this can work */
	for(;;nap(1)){
		if(button1()){
			ngetrect(&r, 0, 1, 1, 10, 10);
			rectf(&screen, r, ~0, D^S);
		}else if(button2()){
//			ngetrect(&r, 0, 2, 0, 10, 10);
			r = getrectb(2, 0);
			texture(&screen, r, lightgrey, F&~S);
		}else if(button3())
			break;
	}
}

